<!DOCTYPE html>
<html lang="zh-TW">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LIQUI MOLY Taiwan AI產品諮詢助理</title>
    <meta name="description" content="LIQUI MOLY Taiwan 力魔機油 AI產品諮詢助理，為您推薦最適合的機油產品">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/style.css">
</head>

<body>
    <!-- 對話前表單 Overlay -->
    <div class="form-overlay" id="formOverlay">
        <div class="form-container">
            <div class="form-header">
                <img src="assets/liqui-moly-logo.jpg" alt="LIQUI MOLY" class="form-logo">
                <h2>歡迎使用 AI產品諮詢助理</h2>
                <p>請填寫以下資訊，以便我們提供更好的服務</p>
            </div>
            <form id="userInfoForm">
                <div class="form-group">
                    <label for="userName">姓名 <span class="required">*</span></label>
                    <input type="text" id="userName" name="userName" required placeholder="請輸入您的姓名">
                </div>
                <div class="form-group">
                    <label for="userEmail">電子郵件 <span class="required">*</span></label>
                    <input type="email" id="userEmail" name="userEmail" required placeholder="請輸入電子郵件">
                </div>
                <div class="form-group">
                    <label for="userPhone">手機號碼 <span class="optional">(選填)</span></label>
                    <input type="tel" id="userPhone" name="userPhone" placeholder="請輸入手機號碼" pattern="[0-9]{10}"
                        title="請輸入10碼數字">
                </div>
                <div class="form-group">
                    <label for="category">問題類別 <span class="required">*</span></label>
                    <select id="category" name="category" required>
                        <option value="">請選擇問題類別</option>
                        <option value="車型機油推薦">車型機油推薦</option>
                        <option value="產品使用問題">產品使用問題</option>
                        <option value="購買管道諮詢">購買管道諮詢</option>
                        <option value="合作洽詢">合作洽詢</option>
                        <option value="其他問題">其他問題</option>
                    </select>
                </div>
                <button type="submit" class="form-submit-btn">開始諮詢</button>
            </form>
        </div>
    </div>

    <div class="chat-container" id="chatContainer" style="display: none;">
        <!-- Header -->
        <header class="chat-header">
            <div class="header-logo">
                <img src="assets/liqui-moly-logo.jpg" alt="LIQUI MOLY" class="logo">
            </div>
            <div class="header-text">
                <h1>AI產品諮詢助理</h1>
                <span class="status-indicator">
                    <span class="status-dot"></span>
                    線上服務中
                </span>
            </div>
        </header>

        <!-- Chat Messages Area -->
        <main class="chat-messages" id="chatMessages">
            <!-- Welcome Message -->
            <div class="message bot-message">
                <div class="message-avatar">
                    <img src="assets/bot-avatar.jpg" alt="助理">
                </div>
                <div class="message-content">
                    <div class="message-bubble">
                        <p>您好！我是 LIQUI MOLY Taiwan 的 AI產品諮詢助理 <span
                                style="filter: hue-rotate(180deg) saturate(2);">🛢️</span></p>
                        <p>我可以協助您：</p>
                        <ul>
                            <li>根據您的車型推薦適合的機油產品</li>
                            <li>解答產品使用方式與應用情境</li>
                            <li>提供購買管道資訊</li>
                        </ul>
                        <p>請問有什麼可以為您服務的嗎？</p>
                    </div>
                    <span class="message-time">剛剛</span>
                </div>
            </div>

            <!-- Quick Actions -->
            <div class="quick-actions">
                <button class="quick-action-btn" data-message="我想找適合我車型的機油">
                    🚗 車型機油推薦
                </button>
                <button class="quick-action-btn" data-message="請問哪裡可以買到 LIQUI MOLY 產品？">
                    📍 購買管道
                </button>
                <button class="quick-action-btn" data-message="請問機油添加劑怎麼使用？">
                    ❓ 產品使用說明
                </button>
            </div>
        </main>

        <!-- Input Area -->
        <footer class="chat-input-area">
            <div class="input-container">
                <textarea id="messageInput" placeholder="輸入您的問題..." rows="1" maxlength="1000"></textarea>
                <button id="sendButton" class="send-btn" disabled>
                    <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M22 2L11 13" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                            stroke-linejoin="round" />
                        <path d="M22 2L15 22L11 13L2 9L22 2Z" stroke="currentColor" stroke-width="2"
                            stroke-linecap="round" stroke-linejoin="round" />
                    </svg>
                </button>
            </div>
            <div class="footer-actions">
                <p class="input-hint">按 Enter 發送，Shift + Enter 換行</p>
                <button class="end-chat-btn-footer" id="endChatBtn" title="結束對話">
                    結束對話
                </button>
            </div>
        </footer>
    </div>

    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loadingOverlay">
        <div class="loading-spinner"></div>
    </div>

    <!-- Session Ended Overlay with Rating -->
    <div class="session-ended-overlay" id="sessionEndedOverlay" style="display: none;">
        <div class="session-ended-content">
            <!-- Rating Step -->
            <div id="ratingStep">
                <h2>感謝您的諮詢！</h2>
                <p>請為本次對話體驗評分</p>
                <div class="star-rating" id="starRating">
                    <span class="star" data-rating="1">★</span>
                    <span class="star" data-rating="2">★</span>
                    <span class="star" data-rating="3">★</span>
                    <span class="star" data-rating="4">★</span>
                    <span class="star" data-rating="5">★</span>
                </div>
                <p class="rating-hint">請點選星星評分（1-5 顆星）</p>
                <button class="skip-btn" id="skipRatingBtn">略過評分</button>
            </div>
            <!-- Thank You Step -->
            <div id="thankYouStep" style="display: none;">
                <h2>感謝您的回饋！</h2>
                <p>您的意見對我們非常重要。如有其他問題，歡迎再次開始對話。</p>
                <button class="restart-btn" id="restartBtn">重新開始</button>
            </div>
        </div>
    </div>

    <script src="js/config.js"></script>
    <script src="js/chat.js"></script>
</body>

</html>